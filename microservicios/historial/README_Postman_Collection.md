# Veterinary Medical History API - Postman Collection

This Postman collection provides a complete set of requests to test the Veterinary Medical History API (Historial Cl√≠nico).

## üìã Collection Overview

The collection includes all available endpoints for managing veterinary medical records:

- **GET** `/api/historial` - Retrieve all medical records
- **GET** `/api/historial/{id}` - Get a specific medical record by ID
- **POST** `/api/historial` - Create a new medical record
- **PUT** `/api/historial/{id}` - Update an existing medical record
- **DELETE** `/api/historial/{id}` - Delete a medical record

## üöÄ How to Import the Collection

1. **Download the Collection**: The collection file is named `Vet_Medical_History_API.postman_collection.json`

2. **Import into Postman**:
   - Open Postman
   - Click "Import" button
   - Drag and drop the JSON file or click "Upload Files" to select it
   - Click "Import"

3. **Set Environment Variables**:
   - The collection uses variables for flexibility
   - Default `baseUrl` is set to `http://localhost:8082`
   - You can modify this in the collection variables or create an environment

## üîß Configuration

### Environment Variables

The collection uses the following variables:

| Variable | Default Value | Description |
|----------|---------------|-------------|
| `baseUrl` | `http://localhost:8082` | Base URL for the API server |
| `historialId` | `1` | ID of a medical record for testing |

### Data Model

The `Historial` entity has the following structure:

```json
{
  "historialId": 1,           // Auto-generated ID
  "mascotaId": 1,            // Pet ID
  "inventarioId": 1,         // Inventory ID
  "cantidad": 10,            // Quantity
  "dosisCantidad": 2,        // Dose quantity
  "registroFecha": "2024-01-15" // Registration date (YYYY-MM-DD)
}
```

## üìù Usage Examples

### 1. Get All Medical Records
- **Method**: GET
- **URL**: `{{baseUrl}}/api/historial`
- **Description**: Retrieves all medical records from the database

### 2. Get Medical Record by ID
- **Method**: GET
- **URL**: `{{baseUrl}}/api/historial/{{historialId}}`
- **Description**: Retrieves a specific medical record by its ID

### 3. Create New Medical Record
- **Method**: POST
- **URL**: `{{baseUrl}}/api/historial`
- **Body** (JSON):
```json
{
  "mascotaId": 1,
  "inventarioId": 1,
  "cantidad": 10,
  "dosisCantidad": 2,
  "registroFecha": "2024-01-15"
}
```

### 4. Update Medical Record
- **Method**: PUT
- **URL**: `{{baseUrl}}/api/historial/{{historialId}}`
- **Body** (JSON):
```json
{
  "mascotaId": 1,
  "inventarioId": 1,
  "cantidad": 15,
  "dosisCantidad": 3,
  "registroFecha": "2024-01-20"
}
```

### 5. Delete Medical Record
- **Method**: DELETE
- **URL**: `{{baseUrl}}/api/historial/{{historialId}}`
- **Description**: Deletes the specified medical record

## üß™ Testing Workflow

1. **Start the Application**: Ensure your Spring Boot application is running on port 8082
2. **Test GET All**: First, retrieve all records to see the current state
3. **Test POST**: Create a new medical record
4. **Test GET by ID**: Retrieve the newly created record using its ID
5. **Test PUT**: Update the record with new values
6. **Test DELETE**: Remove the record
7. **Verify**: Use GET All again to confirm the record was deleted

## ‚ö†Ô∏è Important Notes

- The `historialId` is auto-generated by the database sequence
- When creating or updating records, you don't need to provide the `historialId`
- The `registroFecha` should be in `YYYY-MM-DD` format
- All ID fields (`mascotaId`, `inventarioId`) should reference existing records in their respective tables
- The API returns `null` for GET operations when a record is not found

## üîç Troubleshooting

- **Connection Error**: Ensure the Spring Boot application is running on port 8082
- **404 Error**: Check that the base URL is correct
- **500 Error**: Verify the request body format and required fields
- **Database Connection**: Ensure the PostgreSQL database is accessible

## üìä Expected Responses

- **GET All**: Returns an array of Historial objects
- **GET by ID**: Returns a single Historial object or null
- **POST**: Returns the created Historial object with generated ID
- **PUT**: Returns the updated Historial object or null if not found
- **DELETE**: Returns no content (204 status) on success

## üéØ Next Steps

After importing the collection, you can:
1. Create a Postman environment for different deployment stages
2. Add automated tests using Postman's test scripts
3. Set up collection runners for automated testing
4. Share the collection with your team members
