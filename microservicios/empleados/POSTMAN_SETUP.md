# Postman Collection Setup for Vet API Empleado

This document provides instructions for setting up and using the Postman collection for the Employee Microservice API.

## Files Included

1. `Vet_API_Empleado.postman_collection.json` - The main Postman collection
2. `Vet_API_Empleado.postman_environment.json` - Environment variables

## Setup Instructions

### 1. Import the Collection

1. Open Postman
2. Click on "Import" button
3. Select the `Vet_API_Empleado.postman_collection.json` file
4. The collection will be imported with all endpoints

### 2. Import the Environment

1. In Postman, go to "Environments" tab
2. Click "Import" button
3. Select the `Vet_API_Empleado.postman_environment.json` file
4. Select the imported environment from the dropdown in the top-right corner

### 3. Start Your Application

Make sure your Spring Boot application is running on port 8084:
```bash
mvn spring-boot:run
```

## API Endpoints

The collection includes the following endpoints:

### 1. Get All Employees
- **Method**: GET
- **URL**: `{{baseUrl}}/api/empleado`
- **Description**: Retrieves all employees from the database

### 2. Get Employee by ID
- **Method**: GET
- **URL**: `{{baseUrl}}/api/empleado/{{empleadoId}}`
- **Description**: Retrieves a specific employee by their ID
- **Variables**: Update `empleadoId` in the environment to test with different IDs

### 3. Create New Employee
- **Method**: POST
- **URL**: `{{baseUrl}}/api/empleado`
- **Body**: JSON with employee data
- **Description**: Creates a new employee record

### 4. Update Employee
- **Method**: PUT
- **URL**: `{{baseUrl}}/api/empleado/{{empleadoId}}`
- **Body**: JSON with updated employee data
- **Description**: Updates an existing employee record

### 5. Delete Employee
- **Method**: DELETE
- **URL**: `{{baseUrl}}/api/empleado/{{empleadoId}}`
- **Description**: Deletes an employee record by ID

## Employee Data Structure

The employee object has the following structure:

```json
{
  "personaId": 1,
  "nombres": "Juan Carlos",
  "paterno": "González",
  "materno": "López",
  "rut": "12345678-9",
  "cargoId": 1,
  "pacienteFlag": false,
  "functionarioFlag": true,
  "registroFecha": "2024-01-15T10:30:00"
}
```

### Field Descriptions

- `personaId`: Auto-generated ID (not required for POST requests)
- `nombres`: First names
- `paterno`: Paternal surname
- `materno`: Maternal surname
- `rut`: Chilean RUT (national identification number)
- `cargoId`: Position/role ID
- `pacienteFlag`: Boolean flag indicating if the person is a patient
- `functionarioFlag`: Boolean flag indicating if the person is a staff member
- `registroFecha`: Registration date and time (ISO 8601 format: "YYYY-MM-DDTHH:mm:ss")

## Environment Variables

The collection uses the following environment variables:

- `baseUrl`: The base URL of your API (default: `http://localhost:8084`)
- `empleadoId`: Employee ID for testing specific operations (default: `1`)
- `contentType`: Content type header (default: `application/json`)

## Testing Workflow

1. **Start with GET All Employees** to see existing data
2. **Create a new employee** using the POST endpoint
3. **Get the created employee** by ID to verify it was saved
4. **Update the employee** using the PUT endpoint
5. **Verify the update** by getting the employee again
6. **Delete the employee** using the DELETE endpoint
7. **Verify deletion** by trying to get the employee (should return null)

## Troubleshooting

### Common Issues

1. **Connection refused**: Make sure your Spring Boot application is running on port 8084
2. **404 Not Found**: Verify the base URL is correct in the environment variables
3. **500 Internal Server Error**: Check your application logs for database connection issues

### Database Connection

The application is configured to connect to a PostgreSQL database at:
- Host: `40.67.145.51:5432`
- Database: `duoc`
- Username: `duoc`

Make sure the database is accessible and the credentials are correct.

## Notes

- The `personaId` field is auto-generated by the database sequence
- For POST requests, you don't need to include the `personaId` field
- The API returns the created/updated employee object with the generated ID
- All endpoints return JSON responses
